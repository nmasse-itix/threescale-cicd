---

- name: Deploy the Echo API to a 3scale SaaS instance, with hosted APIcasts and no smoketests
  hosts: threescale
  gather_facts: no
  vars:
    threescale_cicd_openapi_smoketest_operation: Echo
    threescale_cicd_apicast_policies_cors: yes
    threescale_cicd_openapi_file: '{{ playbook_dir }}/api/echo-api-bare.yaml'
  tasks:
  # Deploy the service
  - import_role:
      name: 'nmasse-itix.threescale-cicd'
  # Delete the service
  - import_role:
      name: 'nmasse-itix.threescale-cicd'
      tasks_from: 'cleanup'
